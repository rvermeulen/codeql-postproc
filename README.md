# CodeQL Post Processing

A tool to post process files that are generated by the CodeQL CLI.

Currently supports adding version control provenance information to databases and sarif files generated by the CodeQL CLI.

## Usage

### Adding version control provenance information to a database

The tool supports both bundled (a zip archived database) and unbundled databases.

```bash
codeql-postproc database add-vcs-provenance --repository-uri https://github.com/rvermeulen/codeql-postproc --revision-id 0b3ee0ba4e2972da7b8f95e53cf1abe2e5d0b35c main some-db.zip
```

### Adding version control provenance information to a sarif file

The tool expects a Sarif file with v2.1.0.

```bash
codeql-postproc sarif add-vcs-provenance --repository-uri https://github.com/rvermeulen/codeql-postproc --revision-id 0b3ee0ba4e2972da7b8f95e53cf1abe2e5d0b35c some-sarif.sarif
```

or from a database with provenance information

```bash
codeql-postproc sarif add-vcs-provenance --from-database some-db.zip some-sarif.sarif
```

### Query database metadata

By default the CodeQL CLI adds metadata to a database and the tool can be used to query those.

For example, getting the target language:

```bash
codeql-postproc database get-property primaryLanguage some-db.zip
```

or creation metadata:

```bash
codeql-postproc database get-property creationMetaData some-db.zip
```

By default the tool outputs YAML, but the option `--format json` can be used to output JSON.